services:
  _defaults:
    autowire: true
  # Services that depend on the nextcloud connection will cause exception if
  # Nextcloud is not configured.
  Drupal\poc_nextcloud_group_folder\Service\GroupFolderFieldHelper: {}
  Drupal\poc_nextcloud_group_folder\Service\GroupFolderMemberHelper:
    arguments:
      # Explicitly set arguments that cannot be autowired.
      # See https://www.drupal.org/project/drupal/issues/3336739
      Drupal\group\GroupMembershipLoaderInterface: '@group.membership_loader'
  Drupal\poc_nextcloud_group_folder\EntityHook\UserSync:
    arguments:
      Psr\Log\LoggerInterface: '@logger.channel.poc_nextcloud'
  Drupal\poc_nextcloud_group_folder\EntityHook\GroupSync:
    arguments:
      Psr\Log\LoggerInterface: '@logger.channel.poc_nextcloud'
  Drupal\poc_nextcloud_group_folder\EntityHook\GroupContentSync: {}
  poc_nextcloud_group_folder.entity_hook_dispatcher:
    class: Drupal\poc_nextcloud\EntityHook\EntityHookDispatcher
    factory: [~, fromServiceIdsWithEmptyFallback]
    arguments:
      - '@service_container'
      -
        user: '@Drupal\poc_nextcloud_group_folder\EntityHook\UserSync'
        group: '@Drupal\poc_nextcloud_group_folder\EntityHook\GroupSync'
        group_content: '@Drupal\poc_nextcloud_group_folder\EntityHook\GroupContentSync'
